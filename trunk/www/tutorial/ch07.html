<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
	<!-- $Header$ -->
	<META NAME="Description" CONTENT="iText is a JAVA library that can be used to generate complex PDF documents (with images, tables,...).">
	<META NAME="Keywords" CONTENT="PDF, JAVA, servlets, iText, Tutorial, generate, internet, documents, Lowagie, Bruno">
	<TITLE>iText - Tutorial</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#008080" VLINK="#008080" ALINK="#00CCCC">

<A NAME="top"></A>

<TABLE WIDTH="100%" BORDER="0" CELLSPACING="0" CELLPADDING="5" ALIGN="center" BGCOLOR="#808080">
<TR>
	<TD>
	<TABLE WIDTH="100%" BORDER="0" CELLSPACING="0" CELLPADDING="7" BGCOLOR="#008080">
	<TR>
		<TD COLSPAN="2" ALIGN="center">
			<FONT FACE="Times New Roman" SIZE="+3" COLOR="#FFFFFF"><I>i</I></FONT><FONT FACE="Arial,Helvetica" SIZE="+3" COLOR="#FFFFFF">Text Tutorial</FONT>
		</TD>
		<TD BGCOLOR="#808080">
			<a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=15255&type=2" width="125" height="37" border="0" alt="SourceForge.net Logo"></a>
		</TD>
		<TD COLSPAN="2" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">iText, a Free Java-PDF library<BR>
			by </FONT><A HREF="http://www.lowagie.com/"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Bruno Lowagie</FONT></A><BR>
		</TD>
	</TR>
	<TR>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="http://www.lowagie.com/iText/"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Home</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch06.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Previous</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="index.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">TOC</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch08.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Next</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="notyet.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">PDF</FONT></A>]</FONT></TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<BR>
			<FONT FACE="Arial,Helvetica" SIZE="+1">Part II: Other document formats</FONT><BR><BR>
			<FONT FACE="Arial,Helvetica"><B>Chapter 7: XML and (X)HTML</B></FONT><BR><BR><BR>
			<FONT FACE="Arial,Helvetica" SIZE="+1" COLOR="#FF0000">Important: this part of the tutorial / code is under construction</FONT>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="generatingXML"><B>My first iText XML</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
				In <a href="ch02.html">chapter 1</a> of
				this tutorial, we allready talked about generating documents in different formats. Alltough iText is mainly a library
				to generate PDF documents, we have occasionaly generated HTML too. In this chapter, we are going to take a look at XML,
				the eXtensible Markup Language.<br />
				Before we go to the first example, we must point your attention to the fact that the XML generation (and parsing)
				functionality isn't contained in the default iText-release. The code is in separate tar.gz, zip and jar-files.
				You also need some external libraries that aren't in the JDK. You need an XML parser
				library (you can choose any parser you want) and the SAX library (with the org.xml.sax.*-packages).
				iText uses JAXP. JAXP is included in the Java 2 Enterprise Edition, so you will need the j2ee.jar to run these examples.<BR><BR>
			    In the first example: <a href="../examples/Chap0701.java">Chap0701.java</a>,
			    we see how a document is generated containing almost all the objects we discussed in the previous chapters.
			    The result is an XML file (<a href="../examples/Chap0701.xml">Chap0701.xml</a>) that begins like this:<br>
			    <FONT FACE="Courier">
			    &lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br />
			    &lt;!DOCTYPE ITEXT SYSTEM "http://www.lowagie.com/iText/itext.dtd"&gt;<br />
			    &lt;itext creationdate="Fri Aug 17 13:15:42 CEST 2001" producer="iTextXML by lowagie.com"&gt;<br />
                </FONT><br>
			    The rest of the file contains the contents of the document. We recognize a lot of objects
			    and their attributes from the previous chapters. All those objects are contained in the
			    iText DTD. You can find this DTD here: <a href="http://www.lowagie.com/iText/itext.dtd">http://www.lowagie.com/iText/itext.dtd</a>.<br>
			    </FONT><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="xml2pdf"><B>XML to PDF</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			We are not that interested in generating XML. What we really want, is to parse an XML file
			and generate the corresponding PDF (or HTML). That is what we are going to do in
			<a href="../examples/Chap0702.java">example 2</a>.
			In <a href="ch01.html">Chapter 1</a>, we described 5 steps to generate a PDF file;
			to convert an XML file into a PDF file we have to replace step 3 and 4; step 5
			is performed automatically by the parser:<br><br>
			<FONT FACE="Courier">
            // step 3: we create a parser and set the document handler<br>
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();<br>
            <br>
            // step 4: we parse the document<br>
            parser.parse("Chap0701.xml", new SAXiTextHandler(document));<br>
            </FONT><br>These are the results:
			<a href="../examples/Chap0702.pdf">PDF</a>/<a href="../examples/Chap0702.html">HTML</a>.
			</FONT><BR><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="customtags"><B>Custom Tags</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			An XML to PDF convertor that only works with 1 specific DTD isn't very useful.
			The iText DTD isn't an official standard, but it evolved from the iText library.
			What we really need, is a means to convert any XML file to PDF. To achieve this
			we will have to map custom tags (e.g. from a standard DTD) to iText tags.
			There are several ways to do this. In <a href="../examples/Chap0703.java">example 3</a>
			we are going to use a <a href="../examples/tagmap0703.xml">tagmap</a> to convert
			a work by Shakespeare in XML format into a PDF file.<br>
			<a href="../examples/Chap0703.xml">Chap0706.xml</a> is
			the XML file (containing 'The Tragedy of Romeo and Juliet') we are going to parse.
			When taking a look at this XML file we recognize some customs tags such as SPEAKER,
			SPEECH, STAGEDIR,... In iText, these tags all correspond with the 'paragraph'-object
			so we have to map them all to the paragraph tag. But the different tags need to be
			visualized differently. We will let the name of the SPEAKER preceed by the word
			'Speaker:' and we will print this in bold. Stage directions will be printed in
			italic, etc...<br>
			In the <a href="../examples/tagmap0703.xml">tagmap</a>,
			we will define all these attributes like this:<br /><br />
			<FONT FACE="COURIER">		
			&lt;tag name="paragraph" alias="SPEAKER" content="Speaker:"&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="leading" value="16" /&gt;<br /> 
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="size" value="10" /&gt;<br /> 
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="style" value="bold" /&gt;<br />
			&lt;/tag&gt;<br />
			&lt;tag name="paragraph" alias="SPEECH"&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="leading" value="14" /&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="align" value="Left" /&gt;<br />
			&lt;/tag&gt;<br />
			&lt;tag name="paragraph" alias="STAGEDIR"&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="leading" value="14" /&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="size" value="10" /&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="style" value="italic" /&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&lt;attribute name="align" value="Right" /&gt;<br />
			&lt;/tag&gt;<br />
			</FONT><br>
			To generate the PDF file, we only have to make a small change in step 3:<br><br>
			<FONT FACE="Courier">
            // step 3: we create a parser and set the document handler<br>
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();<br>
            <br>
            // step 4: we parse the document<br>
            parser.parse("Chap0703.xml", new SAXmyHandler(document, new TagMap("tagmap0703.xml")));<br>
            </FONT><br>
			Instead of the <FONT FACE="Courier">SAXiTextHandler</FONT>, we use a
			<FONT FACE="Courier">SAXmyHandler</FONT> and a <FONT FACE="Courier">TagMap</FONT> (this is
			a <FONT FACE="Courier">HashMap</FONT> that is automatically filled with <FONT FACE="Courier">XmlPeer</FONT>-object
			based on your own custom tagmap.xml). Check out the
			<a href="../examples/Chap0703.pdf">resulting PDF</a>!
			</FONT><BR><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="easier"><B>Making life easy</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			Forget the previous sections. I have let your read them only for pedagogical reasons ;-)<br />
			In fact, you don't need step 3 and 4, you can just do it in one step, as shown in
			<a href="../examples/Chap0704.java">example 4</a>. We reuse
			the xml-files we converted in example 2 and 3 and we generate them like this:
			<FONT FACE="Courier">
            // step 2:<br>
            // we create a writer that listens to the document<br>
            // and directs a XML-stream to a file<br>
            PdfWriter.getInstance(documentA, new FileOutputStream("Chap0704a.pdf"));<br>
            PdfWriter.getInstance(documentB, new FileOutputStream("Chap0704b.pdf"));<br>
            <br>
            // step 3: we parse the document<br>
            XmlParser.parse(documentA, "Chap0701.xml");<br>
            XmlParser.parse(documentB, "Chap0703.xml", "tagmap0703.xml");<br>
            </FONT><br>
			It's easy, isn't it?
			</FONT><BR><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="datamerging"><B>Data Merging</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			Uptil now, we have converted complete documents to PDF. But what if the document
			is only a template with some tags that have to be replaced by some values from
			a database? In this case, using a tagmap.xml isn't sufficient.<br>
			Suppose we have a database containing some names, email-adresses and URLs
			(see <a href="../examples/simpleDB0705.txt">simpleDB0705.txt</a>)
			and an XML template of a letter: <a href="../examples/simpleLetter0705.xml">simpleLetter0705.xml</a>.
			In this XML template, we can use iText tags (such as &lt;newline /&gt;), tags we can map
			to iText tags (&lt;letter&gt; is mapped to &lt;itext&gt;), but also some tags we are
			going to use for data merging: &lt;mail /&gt;, &lt;givenname /&gt;, &lt;name /&gt; and
			&lt;website /&gt;.<br>
			There are 5 records in our simple database. <a href="../examples/Chap0705.java">Example 5</a> shows
			how we can use this database to generate 5 different document based on the XML template.
			For each letter, we are going to make a new <FONT FACE="Courier">HashMap</FONT>
			that will operate as tagmap:<br><br>
			<FONT FACE="Courier">
                HashMap tagmap = new HashMap();<br>
                StringTokenizer tokenizer = new StringTokenizer(line, "|");<br>
                <br>
                XmlPeer peer = new XmlPeer(ElementTags.ITEXT, "letter");<br>
                tagmap.put(peer.getAlias(), peer);<br>
                if (tokenizer.hasMoreTokens()) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer = new XmlPeer(ElementTags.CHUNK, "givenname");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.setContent(tokenizer.nextToken());<br>
                &nbsp;&nbsp;&nbsp;&nbsp;tagmap.put(peer.getAlias(), peer);<br>
                }<br>
                if (tokenizer.hasMoreTokens()) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer = new XmlPeer(ElementTags.CHUNK, "name");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.setContent(tokenizer.nextToken());<br>
                &nbsp;&nbsp;&nbsp;&nbsp;tagmap.put(peer.getAlias(), peer);<br>
                }<br>
                if (tokenizer.hasMoreTokens()) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer = new XmlPeer(ElementTags.CHUNK, "mail");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.setContent(tokenizer.nextToken());<br>
                &nbsp;&nbsp;&nbsp;&nbsp;tagmap.put(peer.getAlias(), peer);<br>
                }<br>
                if (tokenizer.hasMoreTokens()) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer = new XmlPeer(ElementTags.ANCHOR, "website");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;String reference = tokenizer.nextToken();<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.setContent(reference);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.addValue(ElementTags.REFERENCE, reference);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;peer.addValue(ElementTags.COLOR, "#0000FF");<br>
                &nbsp;&nbsp;&nbsp;&nbsp;tagmap.put(peer.getAlias(), peer);<br>
                }<br>
            </FONT><br>
			We see that the three first fields are mapped to a &lt;chunk&gt; and
			that the last field (an URL) is used as an anchor!<br>
			We parse the XML template 5 times (once per tagmap) and this results
			in <a href="../examples/Chap0705_1.pdf">letter 1</a>,
			<a href="../examples/Chap0705_2.pdf">letter 2</a>,
			<a href="../examples/Chap0705_3.pdf">letter 3</a>,
			<a href="../examples/Chap0705_4.pdf">letter 4</a> and
			<a href="../examples/Chap0705_5.pdf">letter 5</a>.<br>
			In a 'real life' application, you probably will have to use your own tagmap class (derived
			from class <FONT FACE="Courier">HashMap</FONT> or <FONT FACE="Courier">TagMap</FONT>) class
			in combination with you own handler class (derived from <FONT FACE="Courier">SAXmyHandler</FONT>).
			You can do some really neat stuff with this!
			</FONT><BR><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="htmlparsing"><B>Parsing (X)HTML</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			Once we can parse XML, why couldn't we parse (X)HTML?
			One could create a Html2iText tagmap, or even a special HtmlHandler.
			<a href="../examples/Chap0706.java">Example 6</a> shows
			how we can convert the HTML page generated in example 2 to PDF, using the class
			<FONT FACE="Courier">SAXmyHtmlHandler</FONT>. This results in a PDF file that
			is similar to the result of example 2: <a href="../examples/Chap0706.pdf">Chap0706.pdf</a>.
			In <a href="../examples/Chap0707.java">example 7</a>,
			we use this HTML handler behind the screens (just like in the section 'making life easier').
			Unfortunately, this part of iText is not yet completed. A lot of tags aren't supported yet.
			There is a lot of room for improvement!<br>
			</FONT><br>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="htmlwithCSS"><B>Generating a HTML file with a CSS</B></A> (special thanks to Matt Benson)</FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			In <a href="../examples/Chap0708.java">example 8</a>, we generate an HTML file that uses a CSS file.
			We add the CSS file like this:<br>
			<FONT FACE="Courier"><br>
			document.add(new Header(HtmlTags.STYLESHEET, "myStyles.css"));<br>
			</FONT><br>
			If you look at the file <a href="../examples/myStyles.css">myStyles.css</a>,
			you can see we defined not only some tags (like body, a,...), but also some
			classes (small, red, blue, gray). We can now use these classes, by setting
			the markup-attributes of the objects we are using:<br>
			<FONT FACE="Courier"><br>
			document.add(new Header(HtmlTags.STYLESHEET, "myStyles.css"));<br>
			</FONT><br>
            listItem = new ListItem("Isaac Asimov");<br>
            listItem.setMarkupAttribute(ElementTags.CLASS, "small");<br>
			Paragraph cTitle = new Paragraph("This is chapter " + i);<br>
            cTitle.setMarkupAttribute(ElementTags.CLASS, "red");<br>
			</FONT><br>
			Take a look at the result to see the effect of the style sheet:
			<a href="../examples/Chap0708.html">Chap0708.html</a>.
			<BR><BR><br>
		</TD>
	</TR>
	<TR>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="#top"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Top</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch06.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Previous</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="index.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">TOC</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch08.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Next</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="notyet.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">PDF</FONT></A>]</FONT></TD>
	</TR>
	<TR>
		<TD COLSPAN="2" ALIGN="left" VALIGN="top" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" SIZE="-3">
			<B>Page Updated: </B> $Date$<br>
			Copyright &copy; 2000, 2001 by Bruno Lowagie
			</FONT>
		</TD>
		<TD COLSPAN="3" ALIGN="right" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" SIZE="-3">
			Adolf Baeyensstraat 121, 9040 Gent, BELGIUM,<br>
			tel +00 32 92 28 10 97 mailto:<A HREF="mailto:itext@lowagie.com"><FONT COLOR="#000000">itext@lowagie.com</FONT></A>
			</FONT>
		</TD>
	</TR>
	</TABLE>
	</TD>
</TABLE>

</BODY>
</HTML>
