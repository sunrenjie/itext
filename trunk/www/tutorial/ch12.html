<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
	<!-- $Header$ -->
	<META NAME="Description" CONTENT="iText is a JAVA library that can be used to generate complex PDF documents (with images, tables,...).">
	<META NAME="Keywords" CONTENT="PDF, JAVA, servlets, iText, Tutorial, generate, internet, documents, Lowagie, Bruno">
	<META CONTENT="0" HTTP-EQUIV="Expires">
	<TITLE>iText - Tutorial</TITLE>
</HEAD>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#008080" VLINK="#008080" ALINK="#00CCCC">

<A NAME="top"></A>

<TABLE WIDTH="100%" BORDER="0" CELLSPACING="0" CELLPADDING="5" ALIGN="center" BGCOLOR="#808080">
<TR>
	<TD>
	<TABLE WIDTH="100%" BORDER="0" CELLSPACING="0" CELLPADDING="7" BGCOLOR="#008080">
	<TR>
		<TD COLSPAN="2" ALIGN="center">
			<FONT FACE="Times New Roman" SIZE="+3" COLOR="#FFFFFF"><I>i</I></FONT><FONT FACE="Arial,Helvetica" SIZE="+3" COLOR="#FFFFFF">Text Tutorial</FONT>
		</TD>
		<TD BGCOLOR="#808080">
			<a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=15255&type=2" width="125" height="37" border="0" alt="SourceForge.net Logo"></a>
		</TD>
		<TD COLSPAN="2" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">iText, a Free Java-PDF library<BR>
			by </FONT><A HREF="http://www.lowagie.com/"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Bruno Lowagie</FONT></A><BR>
		</TD>
	</TR>
	<TR>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="http://www.lowagie.com/iText/"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Home</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch11.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Previous</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="index.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">TOC</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">&nbsp;</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="notyet.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">PDF</FONT></A>]</FONT></TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<BR>
			<FONT FACE="Arial,Helvetica" SIZE="+1">Part III: Advanced iText</FONT><BR><BR>
			<FONT FACE="Arial,Helvetica"><B>Chapter 12: Page and Table Events</B></FONT><BR><BR><BR>
		</TD>
	</TR>
	<TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="pageevents"><B>Page Events</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			If you generate a PDF file using iText, you add structured content to a <FONT FACE="Courier">Document</FONT>-object
			and this content is automatically being translated to a representation by the <FONT FACE="Courier">PdfWriter</FONT>-object.
			The hidden (package private) object <FONT FACE="Courier">PdfDocument</FONT> is responsable for drawing the content
			on different pages. While this happens, the process adding content is not aware of this. You can ask the writer if
			a <FONT FACE="Courier">Table</FONT> fits the page, you can ask the <FONT FACE="Courier">PdfWriter</FONT> for the
			current page number, but this is all very limited. If you really want to control what happens inside the writer,
			you need to add a <FONT FACE="Courier">PdfPageEvent</FONT>:<BR><br>
			<FONT FACE="Courier">
			// class MyPageEvent implements the PdfPageEvent interface<br>
			MyPageEvent event = new MyPageEvent();<br>
            writer.setPageEvent(event);
			</FONT><br>
			<br>
			This interface contains the following methods you have to implement.
			<UL>
				<LI>public void onOpenDocument(PdfWriter writer, Document document);
				<LI>public void onCloseDocument(PdfWriter writer, Document document);
				<LI>public void onStartPage(PdfWriter writer, Document document);
				<LI>public void onEndPage(PdfWriter writer, Document document);<br><br>
				<LI>public void onParagraph(PdfWriter writer, Document document, float paragraphPosition);
				<LI>public void onParagraphEnd(PdfWriter writer,Document document,float paragraphPosition);
				<LI>public void onChapter(PdfWriter writer,Document document,float paragraphPosition, Paragraph title);
				<LI>public void onChapterEnd(PdfWriter writer,Document document,float paragraphPosition);
				<LI>public void onSection(PdfWriter writer,Document document,float paragraphPosition, int depth, Paragraph title);
				<LI>public void onSectionEnd(PdfWriter writer,Document document,float paragraphPosition);<br><br>
				<LI>public void onGenericTag(PdfWriter writer, Document document, Rectangle rect, String text);
			</UL>
			Of course, you don't always need all these methods, so it's easier not just to
			implement the <FONT FACE="Courier">PdfPageEvent</FONT>-interface, but to extend
			the <FONT FACE="Courier">PdfPageEventHelper</FONT>. This class contains 'empty'
			implementations of all the methods mentioned above. You just have to override
			the methods you need.
			</FONT><BR><BR>
		</TD>
	</TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="openclose"><B>Open and close a document, start and end a page</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			The <FONT FACE="Courier">onOpenDocument</FONT> method and the first <FONT FACE="Courier">onStartPage</FONT> method
			are called just after the document is opened and after the first page has been initialized.
			<FONT FACE="Courier">onOpenDocument</FONT> is mostly used to initialize some parameters that you defined
			yourself in your own page event implemantation.
			<FONT FACE="Courier">onStartPage</FONT> is called just after each new page has been initialized.
			The <FONT FACE="Courier">onEndPage</FONT> method is called just before a new page is started
			and initialized. This is the best method to add some headers and footers (if the
			<FONT FACE="Courier">HeaderFooter</FONT>-object isn't sufficient for your needs).
			If you add headers and footers in the <FONT FACE="Courier">onStartPage</FONT> method,
			you sometimes have a blank page too many. The <FONT FACE="Courier">onCloseDocument</FONT>
			method is called just before all streams are closed. This is the ideal place to complete
			the template containing the total number of pages, if you have some footer indicating
			'page X of Y'. It is only just before closing the document that you know the exact value of Y.
			In your implementation of these methods, you always get the instance of the writer that
			triggered the event a <FONT FACE="Courier">Document</FONT>-object. THIS IS NOT THE SAME
			OBJECT as the one you are adding structured content to. This is an instance of the (hidden)
			<FONT FACE="Courier">PdfDocument</FONT>-object. You can only invoke a limited number of
			methods on this object.
			</FONT><BR><BR>
		</TD>
	</TR>
	</TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="paragraphchaptersection"><B>Adding paragraphs, chapters, section</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			When a paragraph is added, you might want to know the current Y position on your page.
			In <A HREF="../examples/Chap1104.java">example 4</A> of chapter 11,
			we already used the <FONT FACE="Courier">onParagraph</FONT>-method
			to construct an outline tree. Each entry in the outline tree points at the starting position
			of a paragraph (see <A HREF="../examples/Chap1104.pdf">Chap1104.pdf</A>).
			If you need to add some object at an absolute place just after a paragraph, just use
			the <FONT FACE="Courier">onParagraphEnd</FONT>-method.<br>
			The methods <FONT FACE="Courier">onChapter</FONT>, <FONT FACE="Courier">onSection</FONT>,
			<FONT FACE="Courier">onChapterEnd</FONT> and <FONT FACE="Courier">onSectionEnd</FONT> do
			just the same, but the first two also pass the chapter or section title. This can be used
			to set the content of some header or footer.
			</FONT><BR><BR>
		</TD>
	</TR>
	</TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="generictagevent"><B>Generic tags</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			In <A HREF="../examples/Chap0208.java">example 8</A> of chapter 2, we
			already saw one example using generic tags to construct a glossary. In the next example, we are
			going to use this method to count the number of interventions of each character in the play
			'Romeo and Juliet' by William Shakespeare.
			</FONT><BR><BR>
		</TD>
	</TR>
	</TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="eventexample"><B>An example says a thousand words</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			<A HREF="../examples/Chap1201.java">Chap1201.java</A> really says it all.
			We use XML parsing from <A HREF="ch07.html">chapter 7</A> and
			we will trigger some page events on <A HREF="../examples/Chap0703.xml">Chap0703.xml</A>
			while generating the PDF file.<br>
			We will again use <A HREF="../examples/tagmap0703.xml">tagmap0703.xml</A>, but
			to be able to use the generictag functionality, we are going to change the behaviour of 1 element
			in our own tagmap class that extends <FONT FACE="Courier">com.lowagie.text.xml.TagMap</FONT>
			(remark: if this wasn't an example, I would write a class that extends <FONT FACE="Courier">java.util.HashMap</FONT>
			instead, but that would make this example too long). We also write own handler class, because we don't want
			the document to close when the closing documentroot tag is encountered. We want add an extra page before closing
			the document ourselves.<br>
			A <FONT FACE="Courier">Speaker</FONT>-class was written to keep track of all the different speakers.
			As you can see in the page event implementation, we update the list of speakers in the
			<FONT FACE="Courier">onGenericTag</FONT> method. We do some initialisations in the
			<FONT FACE="Courier">onOpenDocument</FONT> method, we keep track of the current act in the
			<FONT FACE="Courier">onChapter</FONT> method, we add this information as a header on every even
			page of the document and also put a 'page X of Y'-footer in the <FONT FACE="Courier">onPageEnd</FONT> method
			and finally, we set the value of this Y in the <FONT FACE="Courier">onCloseDocument</FONT> method.
			After the document is parsed, we retrieve the alphabetical list of speaker from out event class
			and add an extra page with this info.<br>The result is a very nice document:
			<A HREF="../examples/Chap1201.pdf">Chap1201.pdf</A>
			combining some of the most interesting functionalities of iText.
			</FONT><BR><BR>
		</TD>
	</TR>
	</TR>
		<TD COLSPAN="5" BGCOLOR="#FFFFFF">
			<FONT FACE="Arial,Helvetica" COLOR="#008080"><A NAME="eventtable"><B>Table events</B></A></FONT><BR>
			<FONT FACE="Arial,Helvetica" SIZE="-1">
			If you are using the <FONT FACE="Courier">PdfPTable</FONT>-object, you can also
			set the PdfPTableEvent:<br>
			<br>
			<font face="Courier">
			MyTableEvent event = new MyTableEvent();<br>
            table.setTableEvent(event);</font>
			<br><br>
			The table event interface has only one method you have to implement:<br>
			<br>
			<font face="Courier">public void <B>tableLayout</B>(dfPTable table, float[] widths, float[] heights, int headerRows, int rowStart, PdfContentByte[] canvases);</font>
			<br><br>
			This method is called at the end of the table rendering. You can add text or graphics to
            one of the 4 <FONT FACE="Courier">PdfContentByte</FONT> contained in parameter <FONT FACE="Courier">canvases</FONT>:<br>
			<ul>
			<li>PdfPtable.<b>BASECANVAS</b> - the original PdfContentByte. Anything placed here will be under the table.
			<li>PdfPtable.<b>BACKGROUNDCANVAS</b> - the layer where the background goes to.
			<li>PdfPtable.<b>LINECANVAS</b> - the layer where the lines go to.
			<li>PdfPtable.<b>TEXTCANVAS</b> - the layer where the text go to. Anything placed here will be over the table.
			</ul>
			The layers are placed in sequence on top of each other.<br><br>
			The widths- and heightsarrays have the coordinates of the cells.
			For the widthsarray the first element is the x coordinate of the left table border and the last
			element is the x coordinate of the right table border. For the heightsarray the first element is
			the y coordinate of the top table border and the last element is the y coordinate of the bottom
			table border. Parameter headerRows is the number of rows defined for the header. It is always 0 if
			the table is not rendered with <FONT FACE="Courier">Document.add</FONT>.
			Parameter rowStart is the first row number after the header.<br><br>
			<A HREF="../examples/Chap1202.java">Example 2</A> (<A HREF="../examples/Chap1202.pdf">Chap1202.pdf</A>)
			shows you how you can add an action to a cell and draw some lines on certain canvases.
			</FONT><BR><BR><br><br>
		</TD>
	</TR>
	<TR>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="#top"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Top</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="ch11.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">Previous</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="index.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">TOC</FONT></A>]</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">&nbsp;</FONT></TD>
		<TD WIDTH="20%" ALIGN="center"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF" SIZE="-1">[<A HREF="notyet.html"><FONT FACE="Arial,Helvetica" COLOR="#FFFFFF">PDF</FONT></A>]</FONT></TD>
	</TR>
	<TR>
		<TD COLSPAN="2" ALIGN="left" VALIGN="top" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" SIZE="-3">
			<B>Page Updated: </B> $Date$<br>
			Copyright &copy; 2000, 2001 by Bruno Lowagie
			</FONT>
		</TD>
		<TD COLSPAN="3" ALIGN="right" BGCOLOR="#808080">
			<FONT FACE="Arial,Helvetica" SIZE="-3">
			Adolf Baeyensstraat 121, 9040 Gent, BELGIUM,<br>
			tel +00 32 92 28 10 97 mailto:<A HREF="mailto:itext@lowagie.com"><FONT COLOR="#000000">itext@lowagie.com</FONT></A>
			</FONT>
		</TD>
	</TR>
	</TABLE>
	</TD>
</TABLE>

</BODY>
</HTML>
