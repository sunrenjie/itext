<?xml version="1.0"?>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<!-- iText, a JAVA - PDF library                                      -->
<!-- $Id$         -->
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<project name="iText.site" default="help">
	
	<property file=".ant.properties" />
	
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- Help                                                             -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <target name="help" description="--> shows the help screen">
        <echo>BUILDING THE iText SITE (site.xml)</echo>
        <echo>ant javadoc: Building the API documentation</echo>
        <echo>ant docs.tar.gz: Building and jarring the API documentation</echo>
        <echo>ant lowagie.com: Building the lowagie.com part</echo>
        <echo />
	</target>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- Building the pages for lowagie.com                               -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <target name="lowagie.com" description="--> building the pages for lowagie.com">
        <mkdir dir="${itext.lowagie}" />
		<copy todir="${itext.lowagie}/images" overwrite="no">
			<fileset dir="${itext.xml.lowagie}/images" />
		</copy>
		<copy todir="${itext.lowagie}/ant" overwrite="no">
			<fileset dir="${itext.src}/ant" />
		</copy>
		<copy file="${itext.src}/build.xml" todir="${itext.lowagie}" overwrite="no" />
		<copy file="${itext.xml.lowagie}/style.css" todir="${itext.lowagie}" overwrite="no" />
		<copy file="${itext.xml.lowagie}/MPL-1.1.txt" todir="${itext.lowagie}" overwrite="no" />
		<copy file="${itext.xml.lowagie}/lgpl.txt" todir="${itext.lowagie}" overwrite="no" />
        <xslt basedir="${itext.xml.lowagie}" destdir="${itext.lowagie}" extension=".html" style="${itext.xml.lowagie}/lowagie.xsl" includes="*.xml">
			<param name="releasenumber" expression="${releasenumber}"/>
			<param name="earlyaccessnumber" expression="${earlyaccessnumber}"/>
		</xslt>
    </target>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- Building the tutorial                                            -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <target name="examples.build" description="--> building the pages for lowagie.com">
        <mkdir dir="${itext.tutorial}" />
		<java classname="com.lowagie.tools.BuildSite">
			<arg value="${itext.xml.tutorial}" />
			<arg value="${itext.tutorial}" />
			<arg value="examples.xsl" />
			<arg value="tutorial.xsl" />
	        <classpath>
    	        <pathelement location="${itext.bin}/iText.jar" />
    	        <pathelement location="${itext.bin}/crimson.jar" />
        	</classpath>
		</java>
    </target>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- Building the API documentation                                   -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	
    <target name="javadoc" description="--> generates the complete documentation with javadoc">
        <mkdir dir="${itext.docs}" />
        <javadoc
            destdir="${itext.docs}"
            author="true"
            private="true">
			<packageset dir="${itext.src}" defaultexcludes="yes">
      			<include name="com/lowagie/**" />
		    </packageset>
            <link href="http://java.sun.com/j2se/1.3/docs/api/" />
        </javadoc>
    </target>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!-- Building and archiving the API documentation                     -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <target name="docs.tar.gz" depends="javadoc" description="--> makes a tar.gz-file with the complete javadoc documentation">
        <mkdir dir="${itext.dist}" />
        <mkdir dir="${itext.downloads}" />
        <tar tarfile="${itext.downloads}/docs.tar" basedir="${itext.docs}" />
        <gzip zipfile="${itext.dist}/docs.tar.gz" src="${itext.downloads}/docs.tar" />
        <delete file="${itext.downloads}/docs.tar" />
    </target>

</project>